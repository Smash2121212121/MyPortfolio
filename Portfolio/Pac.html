<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calcolatore PAC</title>
 <style>* {
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}

body {
  margin: 0;
  padding: 20px;
  background: #f5f5f5;
}

.container {
  max-width: 400px;
  margin: 0 auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
}

label {
  display: block;
  margin-bottom: 10px;
}

input {
  width: 100%;
  padding: 6px;
  margin-top: 4px;
}

button {
  width: 100%;
  padding: 10px;
  margin-top: 12px;
  background: #007acc;
  color: white;
  border: none;
  cursor: pointer;
}

button:hover {
  background: #005f99;
}

#results {
  margin-top: 20px;
}
</style>
</head>
<body>
  <div class="container">
    <h1>Calcolatore PAC</h1>

    <form id="Pac">
      <label>
        Capitale iniziale (€):
        <input type="number" id="capIniziale" required />
      </label>

      <label>
        Contributo mensile (€):
        <input type="number" id="capMensile" required />
      </label>

      <label>
        Rendimento annuo (%):
        <input type="number" step="0.01" id="capAnno" required />
      </label>

      <label>
        Orizzonte temporale (anni):
        <input type="number" id="Ann" placeholder="Es. 10" />
      </label>

      <label>
        Oppure obiettivo (€):
        <input type="number" id="Obb" placeholder="Es. 100000" />
      </label>

      <button type="submit">Calcola</button>
    </form>

    <div id="results"></div>
  </div>

<script>const form = document.getElementById("Pac");
const results = document.getElementById("results");

form.addEventListener('submit', function(e) {
  e.preventDefault();

  const capIniziale = parseFloat(document.getElementById('capIniziale').value);
  const capMensile = parseFloat(document.getElementById('capMensile').value);
  const capAnno = parseFloat(document.getElementById('capAnno').value);
  const inputAnn = document.getElementById('Ann').value;
  const inputObb = document.getElementById('Obb').value;

  const anni = inputAnn ? parseInt(inputAnn, 10) : null;
  const obiettivo = inputObb ? parseFloat(inputObb) : null;

  let result = '';

  if (anni !== null) {
    const { totale, versamenti, interessi } = calcByAnn(capIniziale, capMensile, capAnno, anni);

    const totaleFormattato = totale.toLocaleString('it-IT', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    const versamentiFormattati = versamenti.toLocaleString('it-IT', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    const interessiFormattati = interessi.toLocaleString('it-IT', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

    result = `In ${anni} anni avrai ${totaleFormattato}€ (di cui ${versamentiFormattati}€ versati e ${interessiFormattati}€ guadagnati dagli interessi)`;

  } else if (obiettivo !== null) {
    const { mesi, anni: anniCalcolati } = calcByObb(capIniziale, capMensile, capAnno, obiettivo);
    result = `Per raggiungere ${obiettivo}€ servono ${Math.ceil(mesi)} mesi (${anniCalcolati.toFixed(1)} anni)`;
  } else {
    result = 'Inserisci almeno un obiettivo o un orizzonte temporale';
  }

  results.textContent = result;
});
function calcByAnn(capIniziale, capMensile, capAnno, anni) {
  let totale = capIniziale;
  const RendMensile = capAnno / 100;
  const Taxanno = capMensile * 12;
  let versamenti = 0;
  for (let i = 0; i < anni; i++) {
    totale += Taxanno;
    totale *= (1 + RendMensile);
    versamenti += Taxanno;
  }
  const interessi = totale - (capIniziale + versamenti);
  return { totale, versamenti, interessi };
}

function calcByObb(capIniziale, capMensile, capAnno, obiettivo) {
  let totale = capIniziale;
  const RendMensile = capAnno / 100 / 12;
  let mesi = 0;
  while (totale < obiettivo && mesi < 1200) {
    totale += capMensile;
    totale *= (1 + RendMensile);
    mesi++;
  }
  return { mesi, anni: mesi / 12 };
}</script>
</body>
</html>

